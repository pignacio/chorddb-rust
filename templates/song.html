{% extends "base.html" %}

{% block content %}
<h1>{{ song.author() }} - {{ song.title() }}</h1>

<div class="flex flex-row">
  <div id="tablature" class="flex-auto">
  </div>
  <div class="sticky flex flex-row top-10 h-fit">
    <div>
      <label class="btn btn-circle swap swap-rotate">
        <input id="song-drawer-checkbox" type="checkbox" onClick="chorddb.updateSongDrawer(null, this.checked)"/>
        <svg class="swap-off stroke-current" xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="m11.25 9-3 3m0 0 3 3m-3-3h7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
        </svg>
        <svg class="swap-on stroke-current" xmlns="http://www.w4.org/2000/svg" width="32" height="32" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="m12.75 15 3-3m0 0-3-3m3 3h-7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
        </svg>
      </label>
    </div>
    <div id="drawer" class="song-drawer song-drawer-closed">
      <div class="song-drawer-contents">
        Drawer
        <br>
        Current chord: <span id="current-chord"></span>
        <br>
        Options: <span id="chord-options"></span>
        <br>
        <div class="join">
          <button class="btn join-item" onClick="chorddb.updateCurrentFingering(-1);">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="m11.25 9-3 3m0 0 3 3m-3-3h7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
            </svg>

          </button>
          <button id="current-fingering" class="btn join-item"></button>
          <button class="btn join-item" onClick="chorddb.updateCurrentFingering(1);">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="m12.75 15 3-3m0 0-3-3m3 3h-7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
            </svg>

          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<button class="btn btn-outline btn-info" onClick="document.getElementById('original').classList.toggle('invisible')">Show Original</button>
<pre id="original" class="tablature invisible">{{ song.contents() }}</pre>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    let tab = {{ tab| safe }};
    chorddb.initTablature(tab);
  })
</script>
{% endblock %}
